---
template:
  id: story-template-v2
  name: Story Document
  version: 2.0
  output:
    format: markdown
    filename: docs/stories/1.1.Helm-Chart-Input-&-Manifest-Generation.md
    title: "Story 1.1: Helm Chart Input & Manifest Generation"
workflow:
  mode: interactive
  elicitation: advanced-elicitation
agent_config:
  editable_sections:
    - Status
    - Story
    - Acceptance Criteria
    - Tasks / Subtasks
    - Dev Notes
    - Testing
    - Change Log
---
# Story 1.1: Helm Chart Input & Manifest Generation

## Status
Draft

## Story
**As a** DevOps Engineer,
**I want** to provide a local Helm chart path as input,
**so that** HelmGraph can generate a consolidated Kubernetes manifest file.

## Acceptance Criteria
1. The tool accepts a local file path to a Helm chart directory as an argument.
2. The tool accepts a release name and optionally a namespace as input.
3. The tool optionally accepts an output file name. If not present it sends the output to standard out
4. The tool successfully executes the `helm template` command using the provided chart path.
5. The tool captures the complete output of `helm template` as a single, consolidated Kubernetes manifest string.
6. The tool provides clear error messages if the provided chart path is invalid or if `helm template` execution fails.

## Tasks / Subtasks
- [ ] **Task 1: Setup Cobra CLI for input handling.** (AC: 1, 2, 3)
    - [ ] Create a root command for `helmgraph`.
    - [ ] Add flags for chart path, release name, namespace, and output file.
- [ ] **Task 2: Implement Manifest Generation.** (AC: 4, 5)
    - [ ] Create a function to execute the `helm template` command using `os/exec`.
    - [ ] Capture and return the stdout of the command.
- [ ] **Task 3: Add Error Handling.** (AC: 6)
    - [ ] Implement error handling for invalid chart paths.
    - [ ] Implement error handling for `helm template` command failures.
- [ ] **Task 4: Write Unit Tests.**
    - [ ] Write unit tests for the manifest generation logic.
    - [ ] Write unit tests for the error handling logic.

## Dev Notes
- **Helm Interaction**: The tool will interact with the Helm CLI using the `os/exec` package. The `helm` executable must be in the system's PATH. [Source: docs/architecture/tech-stack.md]
- **CLI Framework**: The CLI will be built using the Cobra library. [Source: docs/architecture/tech-stack.md]
- **File Locations**: The main application entry point will be in `cmd/helmgraph/main.go`. The manifest generation logic will be in `internal/manifest/generator.go`. [Source: docs/architecture/source-tree.md]

### Testing
- **Unit Tests**: Unit tests should be created in `_test.go` files in the same package as the code they are testing. [Source: docs/architecture/coding-standards.md]

## Change Log
| Date | Version | Description | Author |
|---|---|---|---|
| 2025-09-01 | 1.0 | Initial draft | Bob (Scrum Master) |

## Dev Agent Record
### Agent Model Used
{{agent_model_name_version}}
### Debug Log References
-
### Completion Notes List
-
### File List
-

## QA Results
-
